<!doctype html>
<html lang="zh-Hans" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.2">
<title data-react-helmet="true">8 - Security | Chialisp</title><meta data-react-helmet="true" property="og:url" content="http://cpp6d.github.io/chialisp-web//chialisp-web/zh-Hans/docs/security"><meta data-react-helmet="true" name="docusaurus_locale" content="zh-Hans"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="8 - Security | Chialisp"><meta data-react-helmet="true" name="description" content="When writing Chialisp, security concerns should be at the front of your mind.  The language is specifically designed to secure money on a network with no centralized authority to enforce rules.  The only person standing in the way of attackers and potentially large sums of money is going to be you."><meta data-react-helmet="true" property="og:description" content="When writing Chialisp, security concerns should be at the front of your mind.  The language is specifically designed to secure money on a network with no centralized authority to enforce rules.  The only person standing in the way of attackers and potentially large sums of money is going to be you."><link data-react-helmet="true" rel="shortcut icon" href="/chialisp-web/zh-Hans/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="http://cpp6d.github.io/chialisp-web//chialisp-web/zh-Hans/docs/security"><link data-react-helmet="true" rel="alternate" href="http://cpp6d.github.io/chialisp-web//chialisp-web/docs/security" hreflang="en"><link data-react-helmet="true" rel="alternate" href="http://cpp6d.github.io/chialisp-web//chialisp-web/zh-Hans/docs/security" hreflang="zh-Hans"><link data-react-helmet="true" rel="alternate" href="http://cpp6d.github.io/chialisp-web//chialisp-web/docs/security" hreflang="x-default"><link rel="stylesheet" href="/chialisp-web/zh-Hans/assets/css/styles.ad8e254e.css">
<link rel="preload" href="/chialisp-web/zh-Hans/assets/js/runtime~main.a3f653e3.js" as="script">
<link rel="preload" href="/chialisp-web/zh-Hans/assets/js/main.a8cafe8e.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">跳到主要内容</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/chialisp-web/zh-Hans/"><img src="/chialisp-web/zh-Hans/img/logo.svg" alt="Chialisp Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/chialisp-web/zh-Hans/img/logo.svg" alt="Chialisp Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">Chialisp</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/chialisp-web/zh-Hans/docs/">Docs</a><a href="https://chialisp.com/training" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Training<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://chia.net/blog" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://chia.net" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Chia.net<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="navbar__item dropdown dropdown--hoverable dropdown--left"><a href="#" class="navbar__item navbar__link"><span><svg viewBox="0 0 20 20" width="20" height="20" aria-hidden="true" style="vertical-align:text-bottom;margin-right:5px"><path fill="currentColor" d="M19.753 10.909c-.624-1.707-2.366-2.726-4.661-2.726-.09 0-.176.002-.262.006l-.016-2.063 3.525-.607c.115-.019.133-.119.109-.231-.023-.111-.167-.883-.188-.976-.027-.131-.102-.127-.207-.109-.104.018-3.25.461-3.25.461l-.013-2.078c-.001-.125-.069-.158-.194-.156l-1.025.016c-.105.002-.164.049-.162.148l.033 2.307s-3.061.527-3.144.543c-.084.014-.17.053-.151.143.019.09.19 1.094.208 1.172.018.08.072.129.188.107l2.924-.504.035 2.018c-1.077.281-1.801.824-2.256 1.303-.768.807-1.207 1.887-1.207 2.963 0 1.586.971 2.529 2.328 2.695 3.162.387 5.119-3.06 5.769-4.715 1.097 1.506.256 4.354-2.094 5.98-.043.029-.098.129-.033.207l.619.756c.08.096.206.059.256.023 2.51-1.73 3.661-4.515 2.869-6.683zm-7.386 3.188c-.966-.121-.944-.914-.944-1.453 0-.773.327-1.58.876-2.156a3.21 3.21 0 011.229-.799l.082 4.277a2.773 2.773 0 01-1.243.131zm2.427-.553l.046-4.109c.084-.004.166-.01.252-.01.773 0 1.494.145 1.885.361.391.217-1.023 2.713-2.183 3.758zm-8.95-7.668a.196.196 0 00-.196-.145h-1.95a.194.194 0 00-.194.144L.008 16.916c-.017.051-.011.076.062.076h1.733c.075 0 .099-.023.114-.072l1.008-3.318h3.496l1.008 3.318c.016.049.039.072.113.072h1.734c.072 0 .078-.025.062-.076-.014-.05-3.083-9.741-3.494-11.04zm-2.618 6.318l1.447-5.25 1.447 5.25H3.226z"></path></svg><span>简体中文</span></span></a><ul class="dropdown__menu"><li><a href="/chialisp-web/docs/security" target="_self" rel="noopener noreferrer" class="dropdown__link" style="text-transform:capitalize">English</a></li><li><a href="/chialisp-web/zh-Hans/docs/security" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" style="text-transform:capitalize">简体中文</a></li></ul></div></div><div class="navbar__items navbar__items--right"><a href="https://github.com/Chia-Network/chialisp-web" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">🌜</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">🌞</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/chialisp-web/zh-Hans/"><img src="/chialisp-web/zh-Hans/img/logo.svg" alt="Chialisp Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/chialisp-web/zh-Hans/img/logo.svg" alt="Chialisp Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">Chialisp</b></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/chialisp-web/zh-Hans/docs/">Docs</a></li><li class="menu__list-item"><a href="https://chialisp.com/training" target="_blank" rel="noopener noreferrer" class="menu__link"><span>Training<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="menu__list-item"><a href="https://chia.net/blog" target="_blank" rel="noopener noreferrer" class="menu__link"><span>Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="menu__list-item"><a href="https://chia.net" target="_blank" rel="noopener noreferrer" class="menu__link"><span>Chia.net<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="menu__list-item"><a href="https://github.com/Chia-Network/chialisp-web" target="_blank" rel="noopener noreferrer" class="menu__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="menu__list-item menu__list-item--collapsed"><a href="#" role="button" class="menu__link menu__link--sublist"><span><svg viewBox="0 0 20 20" width="20" height="20" aria-hidden="true" style="vertical-align:text-bottom;margin-right:5px"><path fill="currentColor" d="M19.753 10.909c-.624-1.707-2.366-2.726-4.661-2.726-.09 0-.176.002-.262.006l-.016-2.063 3.525-.607c.115-.019.133-.119.109-.231-.023-.111-.167-.883-.188-.976-.027-.131-.102-.127-.207-.109-.104.018-3.25.461-3.25.461l-.013-2.078c-.001-.125-.069-.158-.194-.156l-1.025.016c-.105.002-.164.049-.162.148l.033 2.307s-3.061.527-3.144.543c-.084.014-.17.053-.151.143.019.09.19 1.094.208 1.172.018.08.072.129.188.107l2.924-.504.035 2.018c-1.077.281-1.801.824-2.256 1.303-.768.807-1.207 1.887-1.207 2.963 0 1.586.971 2.529 2.328 2.695 3.162.387 5.119-3.06 5.769-4.715 1.097 1.506.256 4.354-2.094 5.98-.043.029-.098.129-.033.207l.619.756c.08.096.206.059.256.023 2.51-1.73 3.661-4.515 2.869-6.683zm-7.386 3.188c-.966-.121-.944-.914-.944-1.453 0-.773.327-1.58.876-2.156a3.21 3.21 0 011.229-.799l.082 4.277a2.773 2.773 0 01-1.243.131zm2.427-.553l.046-4.109c.084-.004.166-.01.252-.01.773 0 1.494.145 1.885.361.391.217-1.023 2.713-2.183 3.758zm-8.95-7.668a.196.196 0 00-.196-.145h-1.95a.194.194 0 00-.194.144L.008 16.916c-.017.051-.011.076.062.076h1.733c.075 0 .099-.023.114-.072l1.008-3.318h3.496l1.008 3.318c.016.049.039.072.113.072h1.734c.072 0 .078-.025.062-.076-.014-.05-3.083-9.741-3.494-11.04zm-2.618 6.318l1.447-5.25 1.447 5.25H3.226z"></path></svg><span>Languages</span></span></a><ul class="menu__list"><li class="menu__list-item"><a href="/chialisp-web/docs/security" target="_self" rel="noopener noreferrer" class="menu__link" style="text-transform:capitalize">English</a></li><li class="menu__list-item"><a href="/chialisp-web/zh-Hans/docs/security" target="_self" rel="noopener noreferrer" class="menu__link dropdown__link--active" style="text-transform:capitalize">简体中文</a></li></ul></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu menu--responsive thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA" aria-label="Sidebar navigation"><button aria-label="打开菜单" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Chialisp</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/chialisp-web/zh-Hans/docs/">1 - CLVM Basics</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/chialisp-web/zh-Hans/docs/coins_spends_and_wallets">2 - Coins, Spends and Wallets</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/chialisp-web/zh-Hans/docs/deeper_into_clvm">3 - Deeper into CLVM</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/chialisp-web/zh-Hans/docs/high_level_lang">4 - The High Level Language, Compiler, and Functions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/chialisp-web/zh-Hans/docs/common_functions">5 - Common Functions in Chialisp</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/chialisp-web/zh-Hans/docs/standard_transaction">6 - The Standard Transaction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/chialisp-web/zh-Hans/docs/coin_lifecycle">7 - Lifecycle of a Coin</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/chialisp-web/zh-Hans/docs/security">8 - Security</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/chialisp-web/zh-Hans/docs/debugging">9 - Debugging</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/chialisp-web/zh-Hans/docs/optimization">10 - Optimization</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/chialisp-web/zh-Hans/docs/glossary">The Great Chia Glossary</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">CLVM</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/chialisp-web/zh-Hans/docs/ref/clvm">CLVM Reference</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/chialisp-web/zh-Hans/docs/ref/serialization">Serialization</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Puzzles</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/chialisp-web/zh-Hans/docs/puzzles/singletons">Singletons</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/chialisp-web/zh-Hans/docs/puzzles/pooling">Pooling</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Tutorials</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/chialisp-web/zh-Hans/docs/tutorials/why_chia_is_great">Why Chia is Great</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/chialisp-web/zh-Hans/docs/tutorials/developing_applications">An Overview of Developing Applications on Chia</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/chialisp-web/zh-Hans/docs/tutorials/tools_and_setup">Tools and Setup</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/chialisp-web/zh-Hans/docs/tutorials/programming_chialisp">Programming in Chialisp</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/chialisp-web/zh-Hans/docs/tutorials/coin_lifecycle_and_testing">Coin Lifecycle and Testing</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/chialisp-web/zh-Hans/docs/tutorials/singletons">Singletons and Ethereum-like Contracts in Chia</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/chialisp-web/zh-Hans/docs/tutorials/custom_puzzle_lock">Lock a coin with a custom puzzle</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/chialisp-web/zh-Hans/docs/tutorials/coin_spend_rpc">Spend a coin using RPC</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">FAQ</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/chialisp-web/zh-Hans/docs/faq">ChiaLisp and CLVM FAQ</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="markdown"><header><h1 class="h1Heading_27L5">8 - Security</h1></header><p>When writing Chialisp, security concerns should be at the front of your mind.  The language is specifically designed to secure money on a network with <em>no centralized authority</em> to enforce rules.  The only person standing in the way of attackers and potentially large sums of money is going to be you.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="signing-and-asserting-solution-truth"></a>Signing and Asserting Solution Truth<a class="hash-link" href="#signing-and-asserting-solution-truth" title="标题的直接链接">#</a></h2><p>Remember from <a href="/chialisp-web/zh-Hans/docs/coin_lifecycle">our discussion of coin lifecycles</a> that when you push a transaction, it gets gossiped to other nodes until it finds one who will put it into a block.  Every node chooses what will be passed on to the next node. If it likes, it can change some data before it forwards it.</p><p>This is why the aggregated signature is part of the spend bundle.  It allows you to mark data as valid only if there is also a signature that vouches for its correctness.  Signatures are how you prevent nodes from changing your transaction in malicious ways; if they do, the spend will no longer be valid.</p><p>Signing is especially important when looking at solution values.  The puzzle reveal is secured by the puzzle hash on the coin.  The solution, however, can be anything.  Most of the time when you are spending a coin, a the output conditions are passed in somehow through the solution.  If you don&#x27;t sign those conditions (or the delegated puzzle that generates them) you must assume that an attacker is going to notice and attempt to substitute their own values.</p><p>Sometimes, it is necessary to have solution values that logistically cannot be signed, but also should not be changed.  In scenarios like these, you should try to have a signed coin use announcements to assert that the coin is being spent with the correct information.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="asserting-coin-information"></a>Asserting Coin Information<a class="hash-link" href="#asserting-coin-information" title="标题的直接链接">#</a></h2><p>Signing is how you prevent nodes from messing with your own spends, but sometimes you want to create coins that will be traded around with specific rules.  As a result you don&#x27;t know who will be spending the coin, and you don&#x27;t know if they will be honest.  We saw in <a href="/chialisp-web/zh-Hans/docs/common_functions#outer-and-inner-puzzles">our discussion of outer puzzles</a> that you can enforce rules on your child coins using currying and wrapping tree hashes, but there are times when you also want to enforce truths about yourself or your parent.</p><p>This is where the <code>ASSERT_MY_*</code> family of opcodes comes in.  When you need information (<code>parent_coin_info</code>, <code>puzzle_hash</code>, <code>amount</code>) about your coin to use in the puzzle, it cannot always be curried in by an honest party.  Sometimes, it will need to be passed in through the solution.  The solution should always be treated as if it is being solved by malicious or careless parties.  If any coin information is being passed in, it should be asserted with opcodes to ensure that the network, who can see that information, can confirm it.</p><p>Keep in mind that <code>ASSERT_MY_COIN_ID</code> will actually implicitly assert all three of the pieces of information in a coin. The same is true of <code>ASSERT_MY_PARENT_ID</code> for parent coins, which is particularly useful since there is no such thing as <code>ASSERT_MY_PARENT_PUZZLE_HASH</code>, for example.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="replay-attacks"></a>Replay Attacks<a class="hash-link" href="#replay-attacks" title="标题的直接链接">#</a></h2><p>Another huge concern when creating your spends is whether they will be valid if parts of them are excluded or reused.  This kind of attack is the reason why <code>AGG_SIG_UNSAFE</code> is labeled the way it is.</p><p>If you sign something with <code>AGG_SIG_UNSAFE</code>, the only data that is being signed is the message you are trying to sign.  Once you sign and push it, that signature lives on the blockchain forever.  If you later create a puzzle that is locked up with the need for the same signature, an attacker can find the signature you used last time and reuse it.  This is why you should try to always use <code>AGG_SIG_ME</code> if possible.  Not only does it make you commit to the coin ID in the signature (something that is unique to every spend), but it also commits to the genesis challenge of the network you are on. A revealed signature for a coin on testnet could be replayed in mainnet otherwise.</p><p>Exclusion should also be a concern at the forefront of your mind.  Oftentimes, you will be spending multiple coins in the same bundle, and they should all be tied together into one aggregated signature.  If you have good reason not to sign one of them, make sure you know what happens if it gets excluded from the bundle.  Furthermore, aggregated signatures can&#x27;t be disaggregated into smaller signatures <em>unless</em> you have previously signed one of the smaller combinations of public key-message pairs in the bundle. The attacker can exclude the rest of the transactions that contain <code>AGG_SIG</code> conditions and reuse the smaller signature again on the remaining transactions.  They can also calculate the remaining aggregated signature and perhaps sign every spend except the one the exclude. This is known as <strong>signature subtraction</strong> and is another great reason to use <code>AGG_SIG_ME</code> as much as possible.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="puzzle-and-solution-reveals"></a>Puzzle and Solution Reveals<a class="hash-link" href="#puzzle-and-solution-reveals" title="标题的直接链接">#</a></h2><p>Remember to think about when puzzles and solutions are revealed.  They are revealed only at spend time of the coin that is committed to them.  The only thing that the network sees prior to that is the parent coin and the puzzle hash.  This can be an advantage, since you can hide sensitive information for spending the coin inside the puzzle hash before it is ever revealed.  However, once the puzzle is revealed, it&#x27;s revealed forever, so that sensitive information cannot be considered sensitive again.</p><p>Also keep in mind that if a parent coin is currying information to its child coin before it creates it, that will be public before the child coin is spent.  For some wallets, this is an advantage since you may want certain data about a coin&#x27;s puzzle to calculate whether or not it&#x27;s yours.  However, if you were trying to use a plain-text password, that won&#x27;t be very secure.  Instead, make sure to pre-commit to things with hashes and then assert that they are revealed correctly later.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="password-locked-coin-security"></a>Password Locked Coin Security<a class="hash-link" href="#password-locked-coin-security" title="标题的直接链接">#</a></h2><p>It&#x27;s worth noting that the <a href="/chialisp-web/zh-Hans/docs/common_functions#outer-and-inner-puzzles">password locked coin we&#x27;ve been building</a> is actually not very secure.  When you solve the puzzle, you have to reveal the password.  Since any full nodes whom you give your spend to will now be able to see your password, they can change the solution and pay themselves all the money instead!</p><p>In order to fix it, it&#x27;s probably best to curry in a public key that also has to sign for the solution.  The new puzzle will be able to be spent only with a password <em>and</em> only by the person who you have decided owns this coin. Of course, this is not particularly useful most of the time and is usually about as good as a signature locked coin with extra steps.  Signatures are by far the most secure way to lock up your coins.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="conclusion"></a>Conclusion<a class="hash-link" href="#conclusion" title="标题的直接链接">#</a></h2><p>Hopefully you have a better idea of what risks are involved when creating a Chialisp puzzle.  It&#x27;s very worth your time to try and exploit your puzzles by passing in dangerous solutions or leaving out transactions/signatures.  You&#x27;re not just trying to protect against bad actors, but also against people accidentally bricking their coins.  Puzzles are usually pretty permanent, so it&#x27;s worth the extra time.</p></div><footer class="row docusaurus-mt-lg"><div class="col"><a href="https://github.com/Chia-Network/chialisp-web/edit/main/docs/security.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>编辑此页</a></div><div class="col lastUpdated_3DPF"></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文档分页导航"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/chialisp-web/zh-Hans/docs/coin_lifecycle"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">« 7 - Lifecycle of a Coin</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/chialisp-web/zh-Hans/docs/debugging"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">9 - Debugging »</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#signing-and-asserting-solution-truth" class="table-of-contents__link">Signing and Asserting Solution Truth</a></li><li><a href="#asserting-coin-information" class="table-of-contents__link">Asserting Coin Information</a></li><li><a href="#replay-attacks" class="table-of-contents__link">Replay Attacks</a></li><li><a href="#puzzle-and-solution-reveals" class="table-of-contents__link">Puzzle and Solution Reveals</a></li><li><a href="#password-locked-coin-security" class="table-of-contents__link">Password Locked Coin Security</a></li><li><a href="#conclusion" class="table-of-contents__link">Conclusion</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/chialisp-web/zh-Hans/docs/">CLVM Basics</a></li><li class="footer__item"><a class="footer__link-item" href="/chialisp-web/zh-Hans/docs/coins_spends_and_wallets/">Coins, Spends and Wallets</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://keybase.io/team/chia_network.public" target="_blank" rel="noopener noreferrer" class="footer__link-item">Keybase</a></li><li class="footer__item"><a href="https://twitter.com/chia_project" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://www.chia.net/blog/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog</a></li><li class="footer__item"><a href="https://github.com/Chia-Network/clvm" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a class="footerLogoLink_MyFc" href="/chialisp-web/zh-Hans/"><img src="/chialisp-web/zh-Hans/img/full_logo_white.svg" alt="Chialisp full logo" class="themedImage_1VuW themedImage--light_3UqQ footer__logo"><img src="/chialisp-web/zh-Hans/img/full_logo_white.svg" alt="Chialisp full logo" class="themedImage_1VuW themedImage--dark_hz6m footer__logo"></a></div><div class="footer__copyright">Copyright © 2021 Chia Network Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/chialisp-web/zh-Hans/assets/js/runtime~main.a3f653e3.js"></script>
<script src="/chialisp-web/zh-Hans/assets/js/main.a8cafe8e.js"></script>
</body>
</html>